<import src="/widget/zanui-quantity/index.wxml" />
<import src="../../tabbar/tabbar.wxml"/>
<view class="page">
    <view class="page__bd">
        <view class="order-list" wx:if="{{order.product.length > 0}}">
            <view class="order-body">
                <checkbox-group bindchange="checkboxChange">
                    <block wx:for="{{order.product}}" wx:for-item="proitem" wx:for-index="proindex">
                        <view class="order-body_list flex Rel">
                            <label class="weui-cell">
                                <checkbox class="weui-check" value="{{proindex}}" checked="{{proitem.checked}}" />
                                <view class="weui-cell__hd">
                                    <icon class="select icon-yuan iconfont" size="35" wx:if="{{!proitem.checked}}"></icon>
                                    <icon class="select icon-xuanze iconfont" size="35" wx:if="{{proitem.checked}}"></icon>
                                </view>
                            </label>
                            <navigator class="order-body_img" url='../product/product?pid={{proitem.product_id}}'>
                                <image class="pimg" src="{{proitem.cover_img}}@4e_256h_256w"></image>
                            </navigator>
                            <view class="order-body_info flex">
                                <text class="order-body_info_title">{{proitem.title}}</text>
                                <view class="order-body_info_vname">
                                    <text class="vname">种类：</text>
                                    <block wx:for="{{proitem.vname}}" wx:for-item="vitem">
                                        <text class="vname">{{vitem.v_name}}</text>
                                    </block>
                                </view>
                                <view class="flex" style="vertical-align: bottom;overflow:visible;">
                                    <text class="order-body_info_price">¥ {{proitem.price}}</text>
                                    <view class="order-body_info_num Rel">
                                        <template is="zan-quantity" data="{{ ...quantity[proindex] }}" />
                                    </view>
                                </view>
                            </view>
                            <text class='deleate-btn' bindtap='delProductList' data-pid='{{proitem.sku_link_id}}'>+</text>
                        </view>
                    </block>
                </checkbox-group>
            </view>
            <view class="page__ft btn-box flex" wx:if="{{order.product}}">
                <view class="checkAll">
                    <checkbox-group bindchange="checkAllChange">
                        <label class="weui-cell">
                            <checkbox class="weui-check" value="ca" checked="{{ca}}" />
                            <view class="weui-cell__hd">
                                <icon class="select icon-xuanze iconfont" wx:if="{{ca}}"></icon>
                                <icon class="select icon-yuan iconfont" wx:if="{{!ca}}"></icon>
                            </view>
                        </label>
                        <text class='election'>全选</text>
                    </checkbox-group>
                </view>
                <view class="total_price">
                    <view class="total_price">合计：<text>¥ {{total_price}}</text></view>
                </view>
                <button class="button {{placeOrder==false?'disable-btn':''}}" disabled="{{totalDisabled}}" bindtap="goOrder">结算</button>
            </view>
        </view>

        <view wx:else>
            <view class='no-list'>
                <view class='image-box'>
                    <image src='/images/icon/tigger.png'></image>
                </view>
                <view class='text'>你的购物车里空空如也</view>

                <navigator class='see-button' url='../plist/plist?tid=1214&item=Y&limit=12'>
                    去逛逛
                </navigator>
            </view>
        </view>
    </view>

</view>
<template is="tabBar" data="{{tabBar:bindData.tabBar}}"/>