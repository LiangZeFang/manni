<view class="page">
    <form bindsubmit="formSubmit">
        <view class='order-box'>
            <view class='order-header'>
                <view class='order-header-address' bindtap="selectAddress">
                    <!-- <view class='address-title'>收货信息：</view> -->
                    <view class='address-detail' wx:if="{{!address1}}">>>完善收货信息</view>
                    <view class="flex flex-col" wx:else>
                        <view class="Rel">
                            <text>{{address1.username}}</text><text>{{address1.phone}}</text>
                            <text class="Abs" style="margin-left:40rpx">></text>
                        </view>
                        <view>
                        </view>
                        <view class='dizhi'>
                        <text>{{ address1.province}}</text><text>{{address1.city}}</text><text>{{address1.area}}</text>
                        <text>{{address1.address}}</text>
                        </view>
                        <input class="hide" name="province" value="{{address1.province}}" />
                        <input class="hide" name="city" value="{{address1.city}}" />
                        <input class="hide" name="area" value="{{address1.area}}" />
                        <input class="hide" name="address" value="{{address1.address}}" />
                        <input class="hide" name="username" value="{{address1.username}}" />
                        <input class="hide" name="phone" value="{{address1.phone}}" />
                        <input class="hide" name="post" value="{{address1.post}}" />
                    </view>
                </view>
                <!--屏幕背景变暗的背景  -->
  <view class="commodity_screen" bindtap="hideModal" wx:if="{{showModalStatus}}"></view>
  <view class="commodity_screen" bindtap="hideModal" wx:if="{{showModal}}"></view>
  <!--弹出框  -->
    <form bindsubmit="formSubmit_dz">
  <view animation="{{animationData}}" class="commodity_attr_box" wx:if="{{showModalStatus}}">
  <view><text>编辑收货地址</text><text class="iconfont icon-guanbi" bindtap="hideModal"></text></view>
<view><label>姓名</label><input name="username" value="{{username}}" /></view>
<view><label>手机号</label><input name="phone" value="{{phone}}" /></view>
<view><label>邮箱编码</label><input name="post" value="{{post}}" /></view>
<!-- 三级联动 -->
<view class="picker-view" animation="{{animationAddressMenu}}" style="visibility:{{addressMenuIsShow ? 'visible':'hidden'}}">
    <!-- 确认取消按钮 -->
    <view class='btn'>
        <text catchtap="cityCancel">取消</text>
        <text style="float: right" catchtap="citySure">确定</text>
    </view>
    <!-- 选择地址 -->
    <picker-view class='cont' bindchange="cityChange" value="{{value}}" wx:key="">
    <!-- 省 -->
        <picker-view-column>
            <view wx:for="{{provinces}}" class="picker-item" wx:key="{{index}}">{{item.name}}</view>
        </picker-view-column>
        <!-- 市 -->
        <picker-view-column>
            <view wx:for="{{citys}}" class="picker-item" wx:key="index">{{item.name}}</view>
        </picker-view-column>
        <!-- 区 -->
        <picker-view-column>
            <view wx:for="{{areas}}" class="picker-item" wx:key="index">{{item.name}}</view>
        </picker-view-column>
    </picker-view>
</view>
<!-- <button bindtap='select' class='select'>地址选择</button> -->
<view class='address' bindtap='select'>
<label>所在地</label>
<view>
<input disabled='disabled' name="province" value="{{province}}" />，
<input disabled='disabled' name="city" value="{{city}}" />，
<input disabled='disabled' name="area" value="{{area}}" />
<text>></text>
</view>
</view>
<view class='address_dz'><label>详细地址</label><input name="address" value="{{address}}" /></view>
<view><button class="preservation" hover-class="none" formType="submit">保存地址</button></view>
<!-- end三级联动 -->
  </view>
  </form>
            </view>
            <view class='order-detail'>
                <view class='order-title'>订单详情</view>
                <view class="order-body" wx:if="{{product}}">
                    <block wx:for="{{product}}" wx:for-item="proitem" wx:for-index="proindex">
                        <navigator class='product-list' url='../product/product?pid={{proitem.pid}}' hover-class='none'>
                            <view class='product-img'>
                                <image src="{{proitem.img}}"></image>
                            </view>
                            <view class='product-text'>
                                <view class='title'>{{proitem.title}}</view>
                                <view class='v_name'>
                                    <text>种类：</text>
                                    <block wx:for="{{proitem.vname}}" wx:for-item="vitem">
                                        <text class="vname">{{vitem.v_name}}</text>
                                    </block>
                                    <text class='price'>￥{{proitem.price}}</text>
                                </view>
                                <view class='product-number'>x{{proitem.num}}</view>
                            </view>
                        </navigator>
                    </block>
                </view>
            </view>
            <view class='checked-box'>
                <view class='coupon-text'>优惠券
                <view  wx:if="{{coupons}}"><text bindtap='selectcoupon'>{{text?text:'请选择'}}</text><text bindtap='selectcoupon'>></text></view>
                <view  wx:else>暂无可使用优惠券</view>
                </view>
            </view>
            <view class="messageView">
                <view>
                <view class='text'>备注: </view>
                <input name="message" bindblur="bindTextAreaBlur" placeholder="此处为备注内容" placeholder-style="color:#aaa;" value='' />
                </view>
            </view>
            <view class="total"><text>商品总额：</text><text>￥{{total}}</text></view>
            <view class="total" wx:if="{{coupons}}"><text>优惠券：</text><text>-￥{{discount?discount:'0'}}</text></view>
            <view class="total"><text>运费：</text><text>+￥{{prices?prices:'0'}}</text></view>
            <view class="total"><text>合计：</text><text>￥{{total+(prices?prices:0)-(discount?discount:0)}}</text></view>
        </view>
        <view class='order-pay'>
            <view>共{{num}}件商品，实付款：<text>￥</text><text>{{total+(prices?prices:0)-(discount?discount:0)}}</text></view>
            <button class='pay-button' disabled="{{totalDisabled}}" formType="submit">付款</button>
        </view>
    </form>
</view>
<view  animation="{{animationcoupon}}" class="animationcoupon" wx:if="{{showModal}}">
    <view class='title'>优惠详情</view>
    <view class='list'>
        <radio-group bindchange="radioChange">
            <label class="radio" wx:for="{{coupons}}">
                <radio value="{{item.id}},满{{item.coupon_threshold}}-{{item.coupon_off}}元" checked="{{item.checked}}"/>
                <view class='coupon_title'>满{{item.coupon_threshold}}-{{item.coupon_off}}元</view>
                <view class='coupon_mintitle'>有效期：{{item.over_time}}</view>
            </label>
        </radio-group>
    </view>
    <view class='gb' bindtap="hideModal" wx:if="{{showModal}}">关闭</view>
</view>